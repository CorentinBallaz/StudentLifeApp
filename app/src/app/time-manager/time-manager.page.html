<ion-header>
  <ion-toolbar color="primary">
    <ion-title>
      {{ viewTitle }}
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="today()">Aujourd'hui</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
 
<ion-content>
<ion-grid>
  <ion-row>
    <ion-col size="9">
  <!-- Card for adding a new event -->
      <ion-card>
        <ion-card-header tappable (click)="collapseCard = !collapseCard">
          <ion-card-title>New Event</ion-card-title>
        </ion-card-header> 
        <ion-card-content *ngIf="!collapseCard">
    
          <ion-item>
            <ion-input type="text" placeholder="Title" [(ngModel)]="event.title"></ion-input>
          </ion-item>
          <ion-item>
            <ion-input type="text" placeholder="Description" [(ngModel)]="event.desc"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label>Start</ion-label>
            <ion-datetime displayFormat="MM/DD/YYYY HH:mm" pickerFormat="MMM D:HH:mm" [(ngModel)]="event.startTime" [min]="minDate"></ion-datetime>
          </ion-item>
          <ion-item>
            <ion-label>End</ion-label>
            <ion-datetime displayFormat="MM/DD/YYYY HH:mm" pickerFormat="MMM D:HH:mm" [(ngModel)]="event.endTime" [min]="minDate"></ion-datetime>
          </ion-item>
          <ion-item>
            <ion-label>All Day?</ion-label>
            <ion-checkbox [(ngModel)]="event.allDay"></ion-checkbox>
          </ion-item>
          <ion-button fill="outline" expand="block" (click)="addEvent()" [disabled]="event.title == ''">Add Event</ion-button>
    
        </ion-card-content>
      </ion-card> 
    
      <ion-row>
        <!-- Change the displayed calendar mode -->
        <ion-col size="4">
          <ion-button expand="block" [color]="calendar.mode == 'month' ? 'primary' : 'secondary'" (click)="changeMode('month')">Mois</ion-button>
        </ion-col>
        <ion-col size="4">
          <ion-button expand="block" [color]="calendar.mode == 'week' ? 'primary' : 'secondary'" (click)="changeMode('week')">Semaine</ion-button>
        </ion-col>
        <ion-col size="4">
          <ion-button expand="block" [color]="calendar.mode == 'day' ? 'primary' : 'secondary'" (click)="changeMode('day')">Jour</ion-button>
        </ion-col>
    
        <!-- Move back one screen of the slides -->
        <ion-col size="6" text-left>
          <ion-button fill="clear" (click)="back()">
            <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
    
        <!-- Move forward one screen of the slides -->
        <ion-col size="6" text-right>
          <ion-button fill="clear" (click)="next()">
            <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>


      </ion-row>
    
      <calendar 
      [eventSource]="eventSource" 
      [calendarMode]="calendar.mode" 
      [currentDate]="calendar.currentDate"
      [locale]="calendar.locale"
      formatWeekTitle = "MMMM yyyy, 'Semaine' w"
      (onEventSelected)="onEventSelected($event)"
      (onTitleChanged)="onViewTitleChanged($event)"
      (onTimeSelected)="onTimeSelected($event)" 
      startHour="6"
      endHour="20"
      step="30"
      startingDayWeek="1"
      startingDayMonth="0">
      </calendar>
      </ion-col>


      <ion-col size="3">


        <ion-card>
          <ion-card-header text-center tappable (click)="collapseTodo = !collapseTodo">
            <ion-card-title>Create TODO</ion-card-title>
          </ion-card-header>
          <ion-card-content *ngIf="!collapseTodo">
            <ion-grid>
              <ion-row justify-content-center>
                <ion-col align-self-center>
                  <form [formGroup]="todoForm" (ngSubmit)="onSubmitTodo()">
                  <div padding>
                    
                    <ion-item>
                      <ion-input formControlName="title" placeholder="Title"></ion-input>
                    </ion-item>
            
                    <ion-item>
                      <ion-textarea formControlName="content" placeholder="Content"></ion-textarea>
                    </ion-item>

                    <ion-item>
                      <ion-label>Deadline</ion-label>
                      <ion-datetime displayFormat="MM/DD/YYYY HH:mm" pickerFormat="MMM D:HH:mm" formControlName="deadline" [min]="minDate"></ion-datetime>
                    </ion-item>

                    <ion-button shape="round" size="medium" expand="block" type="submit" [disabled]="!todoForm.valid">Add TODO</ion-button>
                  </div>
                </form>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card-content>
        </ion-card>


        <ion-card>
          <ion-card-header text-center>
            <ion-card-title>Mes TODO's en cours</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-list>
              <ion-item text-center *ngFor="let todo of myTodosNotFinished">
                <ion-label (click)='onTodoSelected(todo)'>{{todo.label}}</ion-label>
                <ion-icon slot="end" name="create-outline"></ion-icon>
                <ion-icon slot="end" name="trash-outline"></ion-icon>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>

        <ion-card>
          <ion-card-header text-center>
            <ion-card-title>Mes TODO's termin√©</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-list>
              <ion-item text-center *ngFor="let todo of myTodosFinished">
                <ion-label (click)='onTodoSelected(todo)'>{{todo.label}}</ion-label>
                <ion-icon slot="end" name="create-outline"></ion-icon>
                <ion-icon slot="end" name="trash-outline"></ion-icon>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>



      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
